<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>World Happiness</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/superhero/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link rel="stylesheet" href="static/css/style.css">
  </head>
  <body>
  <div class="container">
    <div class="row">
      <div class="col-md-12 jumbotron text-center">
        <h1>World Happiness Index</h1>
        <p>Use the interactive charts below to explore Happiness Index datasets</p>
        <img class="nav-ufo" src="static/images/earth.jpg">
        <p>Jayvis Hanna, Jeremy Hartnett, Ralph Baroud, Sean Jokhai, Veronica Valencia </p>
        <p></p>
        <p>The World Happiness Report is an annual publication of the United Nations. Citizens of various countries respond to a series of questions 
            rating their own lives. This data is correlated with other life factors such as birth rates per woman, days of sunshine, and crime.  </p>
      </div>
    </div>
    <div class="row">
      <div class="col-md-2">
        <div class="well">
          <h5>Country:</h5>
          <select id="selDataset" onchange="optionChanged(this.value)"></select>
        </div>
        <div class="panel panel-primary">
          <div class="panel-heading">
            <h3 class="panel-title">Country Stats</h3>
          </div>
          <div id="sample-metadata" class="panel-body"></div>
        </div>
      </div>
      <div id= "bar-plot" class="col-md-5"></div>
        <script type="text/javascript">
        window.PLOTLYENV=window.PLOTLYENV || {};
          // Incoming data is internally referred to as incomingData
        d3.json("data/data.json").then((incomingData) => {
          function filterCountryHappiness(Country) {
            return Country.Happiness;
          }

          // Use filter() to pass the function as its argument
          var filteredCountry = incomingData.filter(filterCountryHappiness);

          //  Check to make sure your are filtering your movies.
          console.log(filteredCountry);
          
          // Use the map method with the arrow function to return all the filtered movie titles.
          var country = filteredCountry.map(country =>  country.Country);

          // Use the map method with the arrow function to return all the filtered movie metascores.
          var happiness = filteredCountryHappiness.map(country => country.Happiness);

          // Check your filtered metascores.
          console.log(ratings);

          // Create your trace.
          var trace = {
            x: Country,
            y: Happiness,
            type: "bar"
          };

          // Create the data array for our plot
          var data = [trace];

          // Define the plot layout
          var layout = {
            title: "Countries Happiness Index",
            xaxis: { title: "Country" },
            yaxis: { title: "Happiness Score"}
          };

          // Plot the chart to a div tag with id "bar-plot"
          Plotly.newPlot("bar-plot", data, layout);
        });;</script> 
        </div>
      <div class="col-md-5">
        <div id="newPlot"></div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div id="bubble"></div>
      </div>
    </div>
    <div>
      <select id="topics" onchange="selection(this.value)">
        <option value="Global Innovation Index">Global Innovation Index</option>
        <option value="Average Births Per Woman">Average Births Per Woman</option>
        <option value="Number of Days of Sunshine">Number of Days of Sunshine</option>
      </select>
    </div>
    <div class="col-md-6" id="comparison_chart"></div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.5.0/d3.js"></script>
  <script src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <script src="/Users/veronicavalencia/Desktop/Project2Group7/data/data.json"></script>
  <script src="static/js/app.js"></script>
  <script src="static/js/comparison.js"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  
</body>
</html>
